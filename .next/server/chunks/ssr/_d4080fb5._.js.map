{"version":3,"sources":["turbopack:///[project]/src/utils/use-get-date-key.ts","turbopack:///[project]/node_modules/@mui/icons-material/esm/CalendarMonth.js","turbopack:///[project]/src/components/news-list-item/index.tsx","turbopack:///[project]/src/components/location-news-page/index.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useAppSelector } from \"@/hooks/use-app-selector\"\r\n\r\nexport const useGetDateKey = () => {\r\n  const userLanguage =\r\n    useAppSelector((state) => state.userSlice.language) || \"ru\"\r\n\r\n  return (date: Date) =>\r\n    new Date(date).toLocaleDateString(\r\n      `${userLanguage}-${userLanguage?.toUpperCase()}`,\r\n      {\r\n        day: \"numeric\",\r\n        month: \"long\",\r\n      },\r\n    )\r\n}\r\n","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zM9 14H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm-8 4H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2z\"\n}), 'CalendarMonth');","import { NewsDTO } from \"@/types/dto/news\"\r\nimport { FC } from \"react\"\r\nimport { Box } from \"@mui/system\"\r\nimport CalendarMonthIcon from \"@mui/icons-material/CalendarMonth\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { useGetDateKey } from \"@/utils/use-get-date-key\"\r\n\r\ntype NewsListItemProps = {\r\n  news: NewsDTO\r\n}\r\n\r\nexport const NewsListItem: FC<NewsListItemProps> = ({ news }) => {\r\n  const router = useRouter()\r\n  const getDateKey = useGetDateKey()\r\n\r\n  return (\r\n    <Box\r\n      className=\"flex cursor-pointer gap-10 overflow-hidden max-lg:gap-4\"\r\n      onClick={() => router.push(`/${news.uuid}`)}\r\n    >\r\n      <div className=\"flex w-[45%] min-w-[160px] shrink-0 items-center justify-center self-start\">\r\n        <img\r\n          src={process.env.NEXT_PUBLIC_UPLOADS + news.image}\r\n          alt={news.title}\r\n          className=\"h-full w-full object-cover\"\r\n        />\r\n      </div>\r\n      <div className=\"flex max-w-[50%] flex-col justify-between\">\r\n        <div className=\"flex flex-col gap-2 sm:gap-10\">\r\n          <h3 className=\"line-clamp-3 w-full overflow-hidden text-[32px] font-bold break-words max-lg:line-clamp-1 max-lg:text-xl\">\r\n            {news.title}\r\n          </h3>\r\n          <p className=\"line-clamp-3 w-full overflow-hidden break-words max-lg:line-clamp-2 max-lg:text-sm\">\r\n            {news.description}\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2.5 max-lg:gap-2\">\r\n            <CalendarMonthIcon className=\"max-sm:text-sm\" />\r\n            <span className=\"max-lg:text-sm\">{getDateKey(news.createdAt)}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Box>\r\n  )\r\n}\r\n","\"use client\"\r\n\r\nimport { useAppSelector } from \"@/hooks/use-app-selector\"\r\nimport { FC, useEffect } from \"react\"\r\nimport { Button, Container, Typography } from \"@mui/material\"\r\nimport { useAppDispatch } from \"@/hooks/use-app-dispatch\"\r\nimport {\r\n  setCurrentLocation,\r\n  updateLocationWithNews,\r\n} from \"@/features/locations/slice\"\r\nimport { NewsDTO } from \"@/types/dto/news\"\r\nimport { NewsListItem } from \"@/components/news-list-item\"\r\nimport { Location } from \"@prisma/client\"\r\nimport { Pagination } from \"@/types/dto/pagination\"\r\nimport { setTotal } from \"@/features/search-news/slice\"\r\nimport { useNews } from \"@/features/search-news/use-news\"\r\nimport { useTranslation } from \"@/providers/i18n-provider\"\r\n\r\ntype LocationNewsPageProps = {\r\n  location: Location\r\n  news: Pagination<NewsDTO[]>\r\n}\r\n\r\nexport const LocationNewsPage: FC<LocationNewsPageProps> = ({\r\n  location,\r\n  news,\r\n}) => {\r\n  const t = useTranslation()\r\n  const dispatch = useAppDispatch()\r\n\r\n  const offset = useAppSelector((state) => state.searchNewsSlice.offset)\r\n  const total = useAppSelector((state) => state.searchNewsSlice.total)\r\n  const limit = useAppSelector((state) => state.searchNewsSlice.limit)\r\n\r\n  const { news: newsList, isLoading, loadMore } = useNews()\r\n\r\n  useEffect(() => {\r\n    dispatch(setCurrentLocation({ ...location, news: news.data }))\r\n    dispatch(updateLocationWithNews({ ...location, news: news.data }))\r\n    dispatch(setTotal(news.total))\r\n  }, [dispatch, location, news.data, news.total])\r\n\r\n  return (\r\n    <Container maxWidth=\"xl\" className=\"bg-[rgba(255,255,255,0.9)] px-2\">\r\n      <div className=\"flex w-full flex-col gap-2.5\">\r\n        <Typography\r\n          variant=\"h5\"\r\n          className=\"text-primary border-primary-main border-b-4 pb-2.5 font-bold\"\r\n          color=\"primary\"\r\n        >\r\n          {location?.title}\r\n        </Typography>\r\n        <div className=\"mt-10 flex flex-col gap-2.5\">\r\n          {!isLoading && newsList.length === 0 ? (\r\n            <span>{t(\"common.noNews\")}</span>\r\n          ) : (\r\n            newsList.map((n: NewsDTO) => <NewsListItem news={n} key={n.uuid} />)\r\n          )}\r\n        </div>\r\n        {isLoading ? (\r\n          <span>{t(\"common.loading\")}</span>\r\n        ) : (\r\n          total > offset + limit && (\r\n            <Button\r\n              className=\"w-fit self-center\"\r\n              variant=\"outlined\"\r\n              color=\"primary\"\r\n              onClick={loadMore}\r\n            >\r\n              {t(\"common.loadMore\")}\r\n            </Button>\r\n          )\r\n        )}\r\n      </div>\r\n    </Container>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[1]}