module.exports=[918622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},556704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},120635,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},324725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},29173,(e,t,r)=>{t.exports=e.x("@prisma/client",()=>require("@prisma/client"))},876096,(e,t,r)=>{t.exports=e.x("@prisma/client/scripts/default-index.js",()=>require("@prisma/client/scripts/default-index.js"))},254799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},688947,(e,t,r)=>{t.exports=e.x("stream",()=>require("stream"))},270406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},193695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},961724,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-route-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-route-turbo.runtime.prod.js"))},383097,e=>{"use strict";e.s(["ApiError",()=>t,"getApiError",()=>r]);class t extends Error{status;data;constructor(e){super(e.message||"An error occurred"),this.status=e.status,this.data=e.data??void 0}}let r=e=>{if("object"==typeof e&&null!==e&&"status"in e&&"message"in e)return new t({status:Number(e.status)||500,message:e.message,data:e.data});let r=e=>new t({status:500,message:e,data:void 0}),a=e=>"object"==typeof e&&null!==e&&"data"in e;if(!a(e))return r(e instanceof Error?e.message:"Произошла неизвестная ошибка");if(!a(e.data))return r(e.data instanceof Error?e.data.message:"Произошла неизвестная ошибка");let s=e.data;return new t({status:Number(s.status)||500,message:s.error||"Ошибка запроса",data:s.data??void 0})}},63059,e=>{"use strict";e.s(["handleResponse",()=>r]);var t=e.i(89171);let r=(e,r,a,s)=>t.NextResponse.json({status:r,message:e,data:a},{status:r,headers:s})},282623,e=>{"use strict";e.s(["handleError",()=>a]);var t=e.i(383097),r=e.i(63059);let a=e=>{if(e instanceof t.ApiError)return(0,r.handleResponse)(e.message,e.status,e.data);if(e&&"object"==typeof e&&"issues"in e&&Array.isArray(e.issues)){let t=e.issues.map(e=>e.message);return(0,r.handleResponse)(t.join("; "),400)}let a=(0,t.getApiError)(e);return(0,r.handleResponse)(a.message,a.status,a.data)}},686929,e=>{"use strict";e.s(["prisma",()=>n],686929);var t=e.i(29173),r=e.i(876096),a="@prisma/extension-accelerate",s="Unable to connect to the Accelerate API. This may be due to a network or DNS issue. Please check your connection and the Accelerate connection string. For details, visit https://www.prisma.io/docs/accelerate/troubleshoot.";let n=new t.PrismaClient().$extends(function(e){var t;let n;return t=(void 0)??fetch,n=function(e,t){let[r=0,a=0,s=0]=e.split(".").map(Number),[n=0,i=0,o=0]=t.split(".").map(Number);return n-r||i-a||o-s}("5.1.0",r.default.Prisma.prismaVersion.client)>=0,r.default.Prisma.defineExtension(e=>{let i,o,c,{apiKeyPromise:l,baseURL:u}=function(e){let t=Reflect.get(e,"_accelerateEngineConfig");try{let{host:e,hostname:r,protocol:a,searchParams:s}=new URL(t?.accelerateUtils?.resolveDatasourceUrl?.(t));if("prisma+postgres:"===a&&("localhost"===r||"127.0.0.1"===r))return{apiKeyPromise:Promise.resolve(s.get("api_key")),baseURL:new URL(`http://${e}`)}}catch{}return{apiKeyPromise:e._engine.start().then(()=>e._engine.apiKey?.()??null),baseURL:new URL("https://accelerate.prisma-data.net")}}(e),d=(i=r.default.Prisma.prismaVersion,o=["u">typeof navigator?navigator.userAgent:"u">typeof process&&"u">typeof process.versions?`Node/${process.versions.node} (${process.platform}; ${process.arch})`:"EdgeRuntime"in globalThis?"Vercel-Edge-Runtime":"UnknownRuntime",`PrismaEngine/${i.engine}`,`PrismaClient/${i.client}`].join(" "),async e=>{let{args:r}=e,{cacheStrategy:a,__accelerateInfo:n=!1,...i}=r,l=null,{__internalParams:u,query:d}=e;return u.customDataProxyFetch=()=>async(e,r)=>{let n=[];"number"==typeof a?.ttl&&n.push(`max-age=${a.ttl}`),"number"==typeof a?.swr&&n.push(`stale-while-revalidate=${a.swr}`);let i=a?.tags?.join(",")??"";r.headers={...r.headers,"cache-control":n.length>0?n.join(","):"no-cache","user-agent":o,...i.length>0?{"accelerate-cache-tags":i}:{}},c&&(r.headers["accelerate-query-engine-jwt"]=c);try{let a=await t(e,r);return l={cacheStatus:a.headers.get("accelerate-cache-status"),lastModified:new Date(a.headers.get("last-modified")??""),region:a.headers.get("cf-ray")?.split("-")[1]??"unspecified",requestId:a.headers.get("cf-ray")??"unspecified",signature:a.headers.get("accelerate-signature")??"unspecified"},c=a.headers.get("accelerate-query-engine-jwt")??void 0,a}catch{throw Error(s)}},n?{data:await d(i,u),info:l}:d(i,u)});async function p(e){let r,a=await l;if(!a)return{requestId:"unspecified"};try{r=await t(new URL("/invalidate",u).href,{method:"POST",headers:{authorization:`Bearer ${a}`,"content-type":"application/json"},body:JSON.stringify(e)})}catch{throw Error(s)}if(!r?.ok){let e=await r.text();throw Error(`Failed to invalidate Accelerate cache. Response was ${r.status} ${r.statusText}. ${e}`)}return r.body?.cancel(),{requestId:r.headers.get("cf-ray")??"unspecified"}}let m=e.$extends({name:a,query:{$allModels:{$allOperations:d}}});return m.$extends({name:a,client:{$accelerate:{invalidate:e=>p(e),invalidateAll:()=>p({tags:"all"})}},model:{$allModels:{aggregate(e){let t=r.default.Prisma.getExtensionContext(this),a=n?t.$parent[t.$name]:m[t.name];return Object.assign(a.aggregate(e),{withAccelerateInfo:()=>a.aggregate({...e,__accelerateInfo:!0})})},count(e){let t=r.default.Prisma.getExtensionContext(this),a=n?t.$parent[t.$name]:m[t.name];return Object.assign(a.count(e),{withAccelerateInfo:()=>a.count({...e,__accelerateInfo:!0})})},findFirst(e){let t=r.default.Prisma.getExtensionContext(this),a=n?t.$parent[t.$name]:m[t.name];return Object.assign(a.findFirst(e),{withAccelerateInfo:()=>a.findFirst({...e,__accelerateInfo:!0})})},findFirstOrThrow(e){let t=r.default.Prisma.getExtensionContext(this),a=n?t.$parent[t.$name]:m[t.name];return Object.assign(a.findFirstOrThrow(e),{withAccelerateInfo:()=>a.findFirstOrThrow({...e,__accelerateInfo:!0})})},findMany(e){let t=r.default.Prisma.getExtensionContext(this),a=n?t.$parent[t.$name]:m[t.name];return Object.assign(a.findMany(e),{withAccelerateInfo:()=>a.findMany({...e,__accelerateInfo:!0})})},findUnique(e){let t=r.default.Prisma.getExtensionContext(this),a=n?t.$parent[t.$name]:m[t.name];return Object.assign(a.findUnique(e),{withAccelerateInfo:()=>a.findUnique({...e,__accelerateInfo:!0})})},findUniqueOrThrow(e){let t=r.default.Prisma.getExtensionContext(this),a=n?t.$parent[t.$name]:m[t.name];return Object.assign(a.findUniqueOrThrow(e),{withAccelerateInfo:()=>a.findUniqueOrThrow({...e,__accelerateInfo:!0})})},groupBy(e){let t=r.default.Prisma.getExtensionContext(this),a=n?t.$parent[t.$name]:m[t.name];return Object.assign(a.groupBy(e),{withAccelerateInfo:()=>a.groupBy({...e,__accelerateInfo:!0})})}}}})})}())},501424,e=>{"use strict";e.s(["auth",()=>i,"createRoute",()=>a,"errorBoundary",()=>s,"jsonBody",()=>n,"requireRole",()=>o]);var t=e.i(282623),r=e.i(686929);let a=(e,t)=>{let r=e.reduceRight((e,t)=>t(e),t);return async(e,t)=>{let a=t?.params,s=a&&"function"==typeof a.then?await a:a,n=Object.fromEntries(new URL(e.url).searchParams.entries());return r({request:e,params:s,queryParams:n})}},s=()=>e=>async r=>{try{return await e(r)}catch(e){return(0,t.handleError)(e)}};function n(){return e=>async r=>{try{let t=await r.request.json();return e({...r,body:t})}catch{return(0,t.handleError)({status:400,message:"Invalid JSON body"})}}}let i=()=>r=>async a=>{let s=a.request.headers.get("cookie")||"",{parse:n}=await e.A(696569),i=await e.A(119764),o=n(s).jwt;if(!o)return(0,t.handleError)({status:401,message:"Не авторизован"});try{let e=i.default.verify(o,process.env.JWT_SECRET);return r({...a,userUuid:e})}catch{return(0,t.handleError)({status:401,message:"Неверный токен"})}},o=e=>a=>async s=>{let n=Array.isArray(e)?e:[e],i=await r.prisma.user.findFirst({where:{uuid:s.userUuid}});return i?n.includes(i.role)?a(s):(0,t.handleError)({status:403,message:"Нет доступа"}):(0,t.handleError)({status:401,message:"Не авторизован"})}},814747,(e,t,r)=>{t.exports=e.x("path",()=>require("path"))},792509,(e,t,r)=>{t.exports=e.x("url",()=>require("url"))},522734,(e,t,r)=>{t.exports=e.x("fs",()=>require("fs"))},524836,(e,t,r)=>{t.exports=e.x("https",()=>require("https"))},921517,(e,t,r)=>{t.exports=e.x("http",()=>require("http"))},223219,(e,t,r)=>{},696569,e=>{e.v(t=>Promise.all(["server/chunks/node_modules_cookie_dist_index_fbb96389.js"].map(t=>e.l(t))).then(()=>t(904739)))},119764,e=>{e.v(t=>Promise.all(["server/chunks/[root-of-the-server]__d257cb1d._.js","server/chunks/node_modules_5cb7c69b._.js"].map(t=>e.l(t))).then(()=>t(724652)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__06c556db._.js.map